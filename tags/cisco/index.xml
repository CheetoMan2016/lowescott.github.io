<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Scott&#39;s Weblog </title>
    <link>http://lowescott.github.io/tags/cisco/index.xml/</link>
    <language>en-us</language>
    <author>Scott Lowe</author>
    <rights>(C) 2005</rights>
    <updated>2005-11-22 19:01:54 &#43;0000 &#43;0000</updated>

    
      
        <item>
          <title>Cisco PIX VPN and Active Directory Integration</title>
          <link>http://lowescott.github.io/2005/11/22/cisco-pix-vpn-and-active-directory-integration/</link>
          <pubDate>Tue, 22 Nov 2005 19:01:54 &#43;0000</pubDate>
          <author>Scott Lowe</author>
          <guid>http://lowescott.github.io/2005/11/22/cisco-pix-vpn-and-active-directory-integration/</guid>
          <description>

&lt;p&gt;Rather than publishing this information in PDF form on my business website, I&amp;rsquo;ve decided to try something new and post it here as a blog entry. So, here goes.&lt;/p&gt;

&lt;p&gt;This information assumes that you have some experience with the Cisco PIX firewall (i.e., you know how to enter configuration commands and have a basic idea of what the configuration commands actually do) as well as some experience with Windows and Active Directory.&lt;/p&gt;

&lt;p&gt;With that information in hand, let&amp;rsquo;s get started.&lt;/p&gt;

&lt;h2 id=&#34;toc_0&#34;&gt;Configuring the Cisco PIX&lt;/h2&gt;

&lt;p&gt;First, we&amp;rsquo;ll need to setup the PIX firewall. Use the commands below to configure the PIX for PPTP-based VPN connections that will authenticate against an Active Directory back-end.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ip local pool vpn-pool 10.10.10.1-10.10.10.254  
aaa-server vpn-auth inside host 10.10.10.5 secretkey  
aaa-server vpn-auth inside host 10.10.10.6 secretkey  
aaa-server vpn-auth protocol radius  
vpdn group vpn-pptp-group accept dialin pptp  
vpdn group vpn-pptp-group ppp authentication mschap  
vpdn group vpn-pptp-group ppp encryption mppe 128 required  
vpdn group vpn-pptp-group client configuration \  
address local vpn-pool  
vpdn group vpn-pptp-group client configuration \  
dns 10.10.10.5 10.10.10.6  
vpdn group vpn-pptp-group client configuration \  
wins 10.10.10.6 10.10.10.5  
vpdn group vpn-pptp-group client authentication aaa vpn-auth  
vpdn enable outside  
sysopt connect permit-pptp  
access-list acl-nat0 permit ip 10.10.1.0 255.255.255.0 \  
10.10.10.0 255.255.255.0  
nat (inside) 0 access-list acl-nat0
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;(Note that I have placed a backslash to indicate text that is wrapped onto two lines here but should be entered all on a single line in the PIX configuration.)&lt;/p&gt;

&lt;p&gt;In this configuration, replace the IP addresses on lines 2 and 3 (the &lt;code&gt;aaa-server vpn-auth&lt;/code&gt; commands) with the IP addresses of the servers running Internet Authentication Service (IAS) on Windows. See the next section for more information on configuring IAS.&lt;/p&gt;

&lt;p&gt;On those same lines, replace the text &lt;code&gt;secretkey&lt;/code&gt; with the RADIUS shared secret that will be used when configuring the RADIUS/IAS server in the next section.&lt;/p&gt;

&lt;p&gt;Likewise, replace the IP addresses on lines 9 and 10 (the &lt;code&gt;vdpn group vpn-pptp-group client configuration&lt;/code&gt; lines that pass out the DNS and WINS servers to VPN clients) with the IP addresses of your DNS and WINS servers, respectively.&lt;/p&gt;

&lt;p&gt;That should do it. Save the configuration to the PIX and then move on to configuring IAS.&lt;/p&gt;

&lt;h2 id=&#34;toc_1&#34;&gt;Configuring Internet Authentication Service&lt;/h2&gt;

&lt;p&gt;Before doing anything else, create a new global security group in Active Directory. Call it something like &amp;ldquo;VPN Users&amp;rdquo; or similar. We&amp;rsquo;ll use this group later as an additional security check in validating VPN connections.&lt;/p&gt;

&lt;p&gt;Next, install IAS using the Add/Remove Programs icon in Control Panel. Once it has been installed, launch it from the Administrative Tools folder on the Start Menu and we&amp;rsquo;ll proceed with configuring it for authenticating VPN connections to the PIX firewall.&lt;/p&gt;

&lt;p&gt;First, we need to grant IAS permission to read dial-in properties from user accounts in Active Directory. To do this, right-click on the &amp;ldquo;Internet Authentication Service (Local)&amp;rdquo; and select &amp;ldquo;Register Server in Active Directory&amp;rdquo;. Select Yes (or OK) if prompted to confirm.&lt;/p&gt;

&lt;p&gt;With that done, we can now configure the PIX firewall as a RADIUS client. Right-click on RADIUS Clients and select New RADIUS Client. In the wizard, specify the IP address (or DNS name) of the PIX firewall&amp;rsquo;s internal IP address and the shared secret. Note that this shared secret is the same secret key specified in the PIX configuration above. RADIUS clients use this to authenticate to RADIUS servers, so make it a reasonably strong password.&lt;/p&gt;

&lt;p&gt;Now create a remote access policy. Right-click on Remote Access Policies and select New Remote Access Policy. In the wizard, specify a name, select to create a custom policy, and then add the following conditions to the policy:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;NAS-IP-Address: This will be the IP address of the PIX firewall&amp;rsquo;s internal interface. This helps to ensure that this policy only applies to VPN requests from this firewall and not from any other RADIUS client.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;Windows-Groups: This should be the security group created earlier. Any user that should be allowed to authenticate on a VPN connection will need to be a member of this group.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The rest of the policy should be very straightforward. Make this policy the first policy (using the Move Up/Move Down commands in the IAS console), add a user to the group created earlier, and then test your connection. Remote systems attempting to connect via PPTP should now be able to authenticate the VPN connection using their Active Directory usernames and passwords.&lt;/p&gt;

&lt;p&gt;Although this was written from the perspective of authenticating PPTP connections, the process should be very similar for IPSec VPN clients as well.&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>Cisco IOS = Windows XP?</title>
          <link>http://lowescott.github.io/2005/07/29/cisco-ios-windows-xp/</link>
          <pubDate>Fri, 29 Jul 2005 15:43:00 &#43;0000</pubDate>
          <author>Scott Lowe</author>
          <guid>http://lowescott.github.io/2005/07/29/cisco-ios-windows-xp/</guid>
          <description>&lt;p&gt;Well, the &lt;a href=&#34;http://www.blackhat.com/main.html&#34;&gt;Black Hat&lt;/a&gt; conference in Las Vegas certainly generated a great deal of excitement this past week. A security presentation was going to be given about a first-ever exploit for &lt;a href=&#34;http://www.cisco.com&#34;&gt;Cisco&lt;/a&gt; routers. From what I&amp;rsquo;ve been able to decipher, Cisco had been working closely with &lt;a href=&#34;http://www.iss.net&#34;&gt;ISS&lt;/a&gt;, the company whose researcher (Michael Lynn) was supposed to give the presentation, and both companies apparently agreed that the presentation needed further review. Cisco and ISS &lt;a href=&#34;http://www.eweek.com/article2/0,1759,1841232,00.asp&#34;&gt;jointly filed an injunction&lt;/a&gt; against Michael Lynn when he &lt;a href=&#34;http://www.computerworld.com/securitytopics/security/holes/story/0,10801,103515,00.html&#34;&gt;quit his job at ISS to give the presentation&lt;/a&gt; anyway; this is after Cisco employees physically removed presentation pages from the books handed out at the conference and destroyed CDs containing information about the presentation.&lt;/p&gt;

&lt;p&gt;It appeared as if Lynn was going to give a VoIP presentation instead, but then &lt;a href=&#34;http://www.eweek.com/article2/0,1759,1841166,00.asp&#34;&gt;proceeded with the original presentation&lt;/a&gt; anyway, even though he knew it would likely result in lawsuits from Cisco and his former employer. In the presentation, he likened Cisco&amp;rsquo;s IOS (Internetwork Operating System) to Microsoft Windows XP, saying &amp;ldquo;IOS is the Windows XP of the Internet.&amp;rdquo;&lt;/p&gt;

&lt;p&gt;Finally, Thursday, a court order was issued and &lt;a href=&#34;http://www.computerworld.com/securitytopics/security/story/0,10801,103561,00.html&#34;&gt;all parties involved have agreed&lt;/a&gt; to the terms of the court order, which restrict them from further sharing or disseminating any information about the security flaw.&lt;/p&gt;

&lt;p&gt;Both Cisco and ISS have taken a real hit from this whole situation, and I can understand why. Cisco looks like it&amp;rsquo;s trying to cover up security vulnerabilities; it was only after all of this that Cisco issued a &lt;a href=&#34;http://www.cisco.com/warp/public/707/cisco-sa-20050729-ipv6.shtml&#34;&gt;security advisory&lt;/a&gt; discussing the vulnerability. If Michael Lynn&amp;rsquo;s research was accurate, then it is appropriate for people to know so that our networks can be protected. Cisco network equipment running IOS does, indeed, power a large portion of the Internet. &lt;em&gt;At the same time&lt;/em&gt;, if he violated the law and the terms of his agreement with Cisco by reverse engineering IOS, then he should not have publicized that information. &lt;em&gt;But then again&lt;/em&gt;, it appears as if Cisco would not have released security information had Mr. Lynn not proceeded with the presentation, so&amp;hellip;you see that this issue is sensitive and there are reasonable and understandable concerns on all sides.&lt;/p&gt;

&lt;p&gt;To be honest, I don&amp;rsquo;t know what I would have done if I were in the same situation. The only advice that comes to mind is, &amp;ldquo;If you do what is right, you can&amp;rsquo;t go wrong.&amp;rdquo; But what is &lt;em&gt;&amp;ldquo;right&amp;rdquo;&lt;/em&gt; in this situation?&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>VPN Integration Done</title>
          <link>http://lowescott.github.io/2005/07/27/vpn-integration-done/</link>
          <pubDate>Wed, 27 Jul 2005 00:23:45 &#43;0000</pubDate>
          <author>Scott Lowe</author>
          <guid>http://lowescott.github.io/2005/07/27/vpn-integration-done/</guid>
          <description>&lt;p&gt;That was easier than I expected. I managed to get my hardware firewall to authenticate VPN connections against Active Directory via &lt;a href=&#34;http://en.wikipedia.org/wiki/RADIUS&#34;&gt;RADIUS&lt;/a&gt; (using Internet Authentication Service, or IAS) without a great deal of effort. In fact, it was almost easy. If I ever get caught up on documentation, I&amp;rsquo;ll post some details on how to do it on the &lt;a href=&#34;http://www.mercurionsystems.com/index.html&#34;&gt;Mercurion Systems&lt;/a&gt; web site.&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>Next Integration Task(s)</title>
          <link>http://lowescott.github.io/2005/07/24/next-integration-tasks/</link>
          <pubDate>Sun, 24 Jul 2005 23:58:13 &#43;0000</pubDate>
          <author>Scott Lowe</author>
          <guid>http://lowescott.github.io/2005/07/24/next-integration-tasks/</guid>
          <description>&lt;p&gt;With the majority of my Linux servers now authenticating against Active Directory, I&amp;rsquo;m now able to broaden my integration focus and work on some related tasks:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;em&gt;SASL2/PAM:&lt;/em&gt; I still have one server, running SASL2, that has not been switched over to the standard Kerberos/LDAP configuration. I&amp;rsquo;ll need to research the interplay between SASL2 and PAM before I tackle this one.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;em&gt;OpenBSD Authentication:&lt;/em&gt; I haven&amp;rsquo;t touched any of the OpenBSD servers yet for Kerberos/LDAP authentication.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;em&gt;VPN Authentication via RADIUS:&lt;/em&gt; I&amp;rsquo;d like to use RADIUS to handle some VPN authentication against Active Directory as well. I don&amp;rsquo;t anticipate this should be too terribly difficult, but it is something that is rather new to me.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;em&gt;Apache Authentication via Kerberos to AD:&lt;/em&gt; One of the documents that helped me in getting the pam_krb5 stuff working was for &lt;a href=&#34;http://www.grolmsnet.de/kerbtut/&#34;&gt;using mod_auth_kerb with Apache&lt;/a&gt; (more information also posted &lt;a href=&#34;http://sl.mvps.org/docs/LinuxApacheKerberosAD.htm&#34;&gt;here&lt;/a&gt; as well). I&amp;rsquo;d like to deploy this for some select areas of our intranet and extranet sites, to add an additional layer of security on top of what is already present.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Of course, this is in addition to trying to establish an internal news server running INNd (and then migrating content from Exchange Server 2003 into this news server) and working on Squid log analysis tools. I&amp;rsquo;ll probably start investigating Squid authentication options as well, since that would be very helpful to my customers (especially if I can get the authentication to be transparent, or very nearly so). On top of that I have duties in church, work as a manager overseeing employees, and things to do as a dad. Whew! I often wonder if I am just not efficient with managing my time, or if I just have too much to do.&lt;/p&gt;
</description>
        </item>
      
    

  </channel>
</rss>

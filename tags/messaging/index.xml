<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Scott&#39;s Weblog </title>
    <link>http://lowescott.github.io/tags/messaging/index.xml/</link>
    <language>en-us</language>
    <author>Scott Lowe</author>
    <rights>(C) 2005</rights>
    <updated>2005-07-16 21:34:22 &#43;0000 &#43;0000</updated>

    
      
        <item>
          <title>Badmail and Exchange 2003</title>
          <link>http://lowescott.github.io/2005/07/16/badmail-and-exchange-2003/</link>
          <pubDate>Sat, 16 Jul 2005 21:34:22 &#43;0000</pubDate>
          <author>Scott Lowe</author>
          <guid>http://lowescott.github.io/2005/07/16/badmail-and-exchange-2003/</guid>
          <description>&lt;p&gt;If you are planning an in-place upgrade of your server running Exchange 2000 to Exchange Server 2003, beware of the Badmail folder. Apparently, during the Exchange Server 2003 setup process, the setup application tries to go back and stamp ACLs (access control lists) on all the objects in the installation directory. This, by default, includes the Badmail directory. If your Badmail directory contains lots of items (which, in an Exchange 2000 installation, it probably does), then this can cause the Setup process to appear to be hung. Microsoft has published &lt;a href=&#34;http://support.microsoft.com/default.aspx?scid=kb;en-us;822578&#34;&gt;this KB article&lt;/a&gt; discussing the issue and the resolution.&lt;/p&gt;

&lt;p&gt;Fortunately, in Exchange Server 2003 SP1, Microsoft has changed the behavior of Exchange to use the Badmail folder only if explicitly configured to do so (see &lt;a href=&#34;http://support.microsoft.com/default.aspx?scid=kb;en-us;884068&#34;&gt;this KB article&lt;/a&gt;). No more monitoring the Badmail folder!&lt;/p&gt;

&lt;p&gt;In addition, for those networks that have not yet deployed Exchange Server 2003 SP1, Microsoft has released the &lt;a href=&#34;http://support.microsoft.com/default.aspx?scid=kb;en-us;867642&#34;&gt;BadMailAdmin tool&lt;/a&gt;. I&amp;rsquo;ve tested this, and it works as advertised.&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>STARTTLS and IMAP in Mail.app</title>
          <link>http://lowescott.github.io/2005/07/02/starttls-and-imap-in-mailapp/</link>
          <pubDate>Sat, 02 Jul 2005 20:47:16 &#43;0000</pubDate>
          <author>Scott Lowe</author>
          <guid>http://lowescott.github.io/2005/07/02/starttls-and-imap-in-mailapp/</guid>
          <description>&lt;p&gt;I &lt;a href=&#34;http://blog.scottlowe.org/2005/05/14/nonstandard-implementations/&#34;&gt;blogged&lt;/a&gt; earlier about my frustration with the &lt;a href=&#34;http://www.apple.com/macosx/&#34;&gt;Mac OS X&lt;/a&gt; Mail.app mail client and its apparent lack of STARTTLS support with IMAP4. Well, on a whim today I decided to take this issue back up again.&lt;/p&gt;

&lt;p&gt;Since &lt;a href=&#34;http://www.microsoft.com/exchange/&#34;&gt;Microsoft Exchange&lt;/a&gt; does not support STARTTLS, I had to use &lt;a href=&#34;http://www.vergenet.net/linux/perdition/&#34;&gt;Perdition&lt;/a&gt; as an IMAP proxy in front of Exchange. Earlier attempts to get Mail.app to do STARTTLS had failed (not sure why), but today I decided to try changing the IMAP port from 993 (the default when you check the &amp;ldquo;Use SSL&amp;rdquo; box) to 143 (the standard IMAP4 port). Oddly enough, it seemed to work!&lt;/p&gt;

&lt;p&gt;Curious to find out for sure, I trotted out tcpdump on the mail gateway running Perdition to capture traffic to/from Mail.app and to/from the back end mail server. The traffic to/from the back end mail server was transmitted in the clear (I used plain text messages so that I could see the content), but the traffic to/from Mail.app was not readable. I also saw Mail.app issue a CAPABILITY command, then issue a STARTTLS command. Bingo!&lt;/p&gt;

&lt;p&gt;So, it appears that Mail.app does indeed support STARTTLS for IMAP, but only if you set the port number back to 143 after checking the &amp;ldquo;Use SSL&amp;rdquo; checkbox.&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>Split E-Mail Routing</title>
          <link>http://lowescott.github.io/2005/05/19/split-e-mail-routing/</link>
          <pubDate>Thu, 19 May 2005 23:59:39 &#43;0000</pubDate>
          <author>Scott Lowe</author>
          <guid>http://lowescott.github.io/2005/05/19/split-e-mail-routing/</guid>
          <description>&lt;p&gt;Now that I have &lt;a href=&#34;http://www.vergenet.net/linux/perdition/&#34;&gt;Perdition&lt;/a&gt; up and running (although not in the way I really wanted; see my post titled &amp;ldquo;Perdition Working Now&amp;rdquo;), I&amp;rsquo;m moving on to setting up an internal news server.&lt;/p&gt;

&lt;p&gt;Before I can get the internal news server up and running, though, I must first address the issue of e-mail submissions to these newsgroups. See, right now I can send an e-mail to &lt;em&gt;newsgroupname@domain.com&lt;/em&gt; (this is obviously an invalid address) and that message will be posted to the newsgroup. This works well because the mailboxes and the newsgroups live on the same server and the mail gateway can route all messages to this server.&lt;/p&gt;

&lt;p&gt;If I setup a separate news server, however, I&amp;rsquo;ll need some e-mail addresses to be directed to the mail server, but other e-mail addresses (the e-mail addresses for the newsgroups) to a different server altogether. I think that &lt;a href=&#34;http://www.postfix.org/&#34;&gt;Postfix&lt;/a&gt; can do this, but I don&amp;rsquo;t know that for certain yet. I suspect that the answer lies somewhere in the mystery of virtual&lt;em&gt;alias_maps, but I just can&amp;rsquo;t wrap my head around it right now. Of course, it _&lt;strong&gt;is&lt;/strong&gt;&lt;/em&gt; getting late here so that may explain it.&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>Perdition Working Now</title>
          <link>http://lowescott.github.io/2005/05/15/perdition-working-now/</link>
          <pubDate>Sun, 15 May 2005 16:31:02 &#43;0000</pubDate>
          <author>Scott Lowe</author>
          <guid>http://lowescott.github.io/2005/05/15/perdition-working-now/</guid>
          <description>&lt;p&gt;I finally managed to get &lt;a href=&#34;http://www.vergenet.net/linux/perdition/&#34;&gt;Perdition&lt;/a&gt; working. Still unable to confirm if &lt;a href=&#34;http://www.apple.com/macosx/&#34;&gt;Mac OS X&amp;rsquo;s&lt;/a&gt; Mail.app supports STARTTLS (my experience thus far says No), I had to resort to using &lt;a href=&#34;http://stunnel.mirt.net/index.html&#34;&gt;Stunnel&lt;/a&gt; to wrap IMAP inside an SSL tunnel, then forward the IMAP traffic to Perdition on the same host. The Perdition proxy then passes the traffic to the back-end mail server. It&amp;rsquo;s not the solution that I really wanted, but it will do for now. At least the &lt;a href=&#34;http://www.microsoft.com/exchange/&#34;&gt;Exchange Server 2003&lt;/a&gt; IMAP server isn&amp;rsquo;t exposed directly to external networks.&lt;/p&gt;

&lt;p&gt;On a slightly related note, the &lt;a href=&#34;http://www.slipstick.com/&#34;&gt;Slipstick Systems&lt;/a&gt; web site has a link to an IMAP proxy server that implements STARTTLS as a workaround for Exchange&amp;rsquo;s lack of native support for STARTTLS. The IMAP proxy can be found at &lt;a href=&#34;http://www.slipstick.com/files/imapproxysvc.zip&#34;&gt;http://www.slipstick.com/files/imapproxysvc.zip&lt;/a&gt;. So, if you have an IMAP4 client that supports STARTTLS and want to connect it to Exchange, you can use this IMAP proxy. At least, until &lt;a href=&#34;http://www.microsoft.com/&#34;&gt;Microsoft&lt;/a&gt; puts STARTTLS support into Exchange directly.&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>Nonstandard Implementations</title>
          <link>http://lowescott.github.io/2005/05/14/nonstandard-implementations/</link>
          <pubDate>Sat, 14 May 2005 22:24:04 &#43;0000</pubDate>
          <author>Scott Lowe</author>
          <guid>http://lowescott.github.io/2005/05/14/nonstandard-implementations/</guid>
          <description>&lt;p&gt;In my experiments with &lt;a href=&#34;http://www.vergenet.net/linux/perdition/&#34;&gt;Perdition&lt;/a&gt;, I learned a couple of very interesting facts. First, the IMAP4 implementation on &lt;a href=&#34;http://www.microsoft.com/exchange/&#34;&gt;Exchange Server 2003&lt;/a&gt; does not support the STARTTLS command, as described in &lt;a href=&#34;http://www.networksorcery.com/enp/rfc/rfc2595.txt&#34;&gt;RFC 2595&lt;/a&gt; and re-affirmed in &lt;a href=&#34;http://www.networksorcery.com/enp/rfc/rfc3501.txt&#34;&gt;RFC 3501&lt;/a&gt;. Instead, Exchange expects an SSL session to be established immediately, and then IMAP is spoken. This is similar to the &amp;ldquo;smtpd_tls_wrappermode&amp;rdquo; directive that &lt;a href=&#34;http://www.postfix.org/&#34;&gt;Postfix&lt;/a&gt; supports.&lt;/p&gt;

&lt;p&gt;Second, it appears that the &lt;a href=&#34;http://www.apple.com/macosx/&#34;&gt;Mac OS X&lt;/a&gt; Mail application (commonly referred to as Mail.app) also uses this IMAP-over-SSL approach, since I&amp;rsquo;ve been using Mail.app to connect to Exchange using IMAP with SSL for quite some time. I&amp;rsquo;m trying to confirm that now, but having precious little luck finding any definitive information one way or the other. If anyone knows for certain, please let me know. I&amp;rsquo;m going to keep searching.&lt;/p&gt;

&lt;p&gt;This is one of those things that just makes me crazy.&lt;/p&gt;
</description>
        </item>
      
    
      
        <item>
          <title>Miscellaneous Projects</title>
          <link>http://lowescott.github.io/2005/05/13/miscellaneous-projects/</link>
          <pubDate>Fri, 13 May 2005 22:22:53 &#43;0000</pubDate>
          <author>Scott Lowe</author>
          <guid>http://lowescott.github.io/2005/05/13/miscellaneous-projects/</guid>
          <description>&lt;p&gt;In my copious spare time (fellow parents out there know this is a joke), I&amp;rsquo;m working on a couple of miscellaneous technical projects:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;em&gt;Internal news server:&lt;/em&gt; I&amp;rsquo;m having so many problems with NNTP-based access from &lt;a href=&#34;http://www.panic.com/unison/&#34;&gt;Unison&lt;/a&gt; to &lt;a href=&#34;http://www.microsoft.com/exchange/&#34;&gt;Exchange Server 2003&lt;/a&gt; that I&amp;rsquo;ve decided to setup an internal NNTP server using Linux and INNd. Linux I&amp;rsquo;m familiar with; INNd is completely new to me. Wish me luck.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;em&gt;IMAP proxy:&lt;/em&gt; This would use &lt;a href=&#34;http://www.vergenet.net/linux/perdition/&#34;&gt;Perdition&lt;/a&gt; to proxy IMAP4S requests to my mail server. I&amp;rsquo;ll probably have Perdition handle IMAP4S and then pass IMAP to the back-end server, offloading the SSL work to the proxy.&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;em&gt;Squid log analysis:&lt;/em&gt; I&amp;rsquo;m looking for a way to parse down the logs from my &lt;a href=&#34;http://www.squid-cache.org/&#34;&gt;Squid&lt;/a&gt; web cache. Once I find a way to do this, then I can really begin offering Squid and &lt;a href=&#34;http://www.squidguard.org/&#34;&gt;SquidGuard&lt;/a&gt; as a content filtering solution to some of my customers.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;I&amp;rsquo;m sure this stuff is probably old hat to some of you out there. Feel free to contribute some helpful information or URLs. I&amp;rsquo;ll keep you posted on how things proceed with these and other projects as they develop.&lt;/p&gt;
</description>
        </item>
      
    

  </channel>
</rss>
